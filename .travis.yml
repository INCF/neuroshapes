language: scala
scala:
   - 2.12.2

stages:
  - name: test 
    if: (branch = master OR branch = simulation_schemas)
  - name: collect
    if: (branch = master AND type = push)

jobs:
  include:
    - stage: test
      script:
        - sbt -javaOptions=.jvmopts compile
        - sbt -javaOptions=.jvmopts test
    - stage: collect
      script: sbt collectResources https://bbp.epfl.ch/nexus/v0 ./schemas all
